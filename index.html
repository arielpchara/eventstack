<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>stack</title>
	<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
	<script src="eventstack.js"></script>
</head>
<body>
<script>

var eMain = new eventStack('main');

eMain.push(function(stk,data){
	l('ZER0');
	return true;
});

eMain.push(function(stk,data){
	data.name = data.name.split('');
	l(data)
	return true;
},{name:'split',depend:'upper'});

eMain.push(function(stk,data){
	l(stk,data);
	data.name = data.name.toUpperCase();
	return true;
},{name:'upper',depend:'set-name'});

eMain.push(function(stk){
	l('delay 1s');
	setTimeout(function(){
		stk.next({name:'fulano'});
		l(stk);
	},1000);
},{name:'set-name',depend:'main'});

eMain.push(function(stk,data){
	l('X');
	return true;
},{name:'main'});

eMain.run();


var eSecond = new eventStack('second');
eSecond.push(function(stk,data){
	l('dois','ZER0');
	return true;
});
eSecond.run();

/*
e.prep(function(stk,data){
	l(stk.step);
	return true;
})

e.run({
	name: 'paulo'
});
*/
</script>	

</body>
</html>